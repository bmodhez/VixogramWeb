<div id="privacy_section" class="bg-gray-900/40 rounded-xl p-4 border border-gray-700 mb-6">
    <div class="text-sm font-semibold text-gray-200 mb-2">Account privacy</div>
    <p class="text-xs text-gray-400">Private accounts hide follower/following lists from other users (counts remain visible).</p>

    <form
        id="privacy_form"
        method="post"
        action="{% url 'profile-settings' %}"
        class="mt-4"
        hx-post="{% url 'profile-settings' %}"
        hx-trigger="change delay:200ms"
        hx-target="#privacy_section"
        hx-swap="outerHTML"
        hx-push-url="false"
        data-autosave="1"
    >
        {% csrf_token %}
        <input type="hidden" name="action" value="privacy" />

        <div class="flex items-center justify-between gap-4">
            <div class="min-w-0">
                <div class="text-sm text-gray-200">Private account</div>
                <div class="text-xs text-gray-400">
                    {% if profile.is_private_account %}
                        Enabled (others see only counts)
                    {% else %}
                        Disabled (verified users can see lists)
                    {% endif %}
                </div>
            </div>
            <label class="relative inline-flex h-6 w-11 items-center cursor-pointer select-none shrink-0" aria-label="Toggle private account">
                {{ privacy_form.is_private_account }}
                <span class="h-6 w-11 rounded-full bg-gray-700 transition-colors peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-emerald-500 peer-focus:ring-offset-2 peer-focus:ring-offset-gray-900 peer-checked:bg-emerald-500"></span>
                <span class="absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white transition-transform peer-checked:translate-x-5"></span>
            </label>
        </div>

        <div class="mt-5 flex items-center justify-between gap-4">
            <div class="min-w-0">
                <div class="text-sm text-gray-200">Stealth mode</div>
                <div class="text-xs text-gray-400">
                    {% if profile.is_stealth %}
                        Enabled (others see you as offline)
                    {% else %}
                        Disabled
                    {% endif %}
                </div>
            </div>
            <label class="relative inline-flex h-6 w-11 items-center cursor-pointer select-none shrink-0" aria-label="Toggle stealth mode">
                {{ privacy_form.is_stealth }}
                <span class="h-6 w-11 rounded-full bg-gray-700 transition-colors peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-emerald-500 peer-focus:ring-offset-2 peer-focus:ring-offset-gray-900 peer-checked:bg-emerald-500"></span>
                <span class="absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white transition-transform peer-checked:translate-x-5"></span>
            </label>
        </div>

        <div class="mt-5 flex items-center justify-between gap-4">
            <div class="min-w-0">
                <div class="text-sm text-gray-200">DND</div>
                <div class="text-xs text-gray-400">
                    {% if profile.is_dnd %}
                        Enabled (no notifications, no calls)
                    {% else %}
                        Disabled
                    {% endif %}
                </div>
            </div>
            <label class="relative inline-flex h-6 w-11 items-center cursor-pointer select-none shrink-0" aria-label="Toggle DND">
                {{ privacy_form.is_dnd }}
                <span class="h-6 w-11 rounded-full bg-gray-700 transition-colors peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-red-500 peer-focus:ring-offset-2 peer-focus:ring-offset-gray-900 peer-checked:bg-red-500"></span>
                <span class="absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white transition-transform peer-checked:translate-x-5"></span>
            </label>
        </div>

        <div class="mt-4">
            <button type="submit" class="bg-gray-700 hover:bg-gray-600 text-white rounded-lg px-4 py-2 transition-colors">Save</button>
            <span class="ml-3 text-xs text-gray-500">Auto-saves on toggle</span>
        </div>
    </form>
</div>
